.class public Lcom/startapp/sdk/adsbase/mraid/c/a;
.super Ljava/lang/Object;
.source "StartAppSDK"


# static fields
.field private static volatile a:Ljava/lang/String;


# direct methods
.method static constructor <clinit>()V
    .locals 0

    return-void
.end method

.method public constructor <init>()V
    .locals 0

    .line 9
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    return-void
.end method

.method public static a()Ljava/lang/String;
    .locals 3

    .line 78
    sget-object v0, Lcom/startapp/sdk/adsbase/mraid/c/a;->a:Ljava/lang/String;

    if-nez v0, :cond_1

    .line 79
    const-class v0, Lcom/startapp/sdk/adsbase/mraid/c/a;

    monitor-enter v0

    .line 80
    :try_start_0
    sget-object v1, Lcom/startapp/sdk/adsbase/mraid/c/a;->a:Ljava/lang/String;

    if-nez v1, :cond_0

    const-string v1, "Ly8NCi8vIG1yYWlkLmpzDQovLw0KDQooZnVuY3Rpb24oKSB7DQoJDQoJY29uc29sZS5sb2coIk1SQUlEIG9iamVjdCBsb2FkaW5nLi4uIik7DQoNCgkvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoJICogY29uc29sZSBsb2dnaW5nIGhlbHBlcg0KCSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KCXZhciBMb2dMZXZlbEVudW0gPSB7DQoJCSJERUJVRyIgICA6IDAsDQoJCSJJTkZPIiAgICA6IDEsDQoJCSJXQVJOSU5HIiA6IDIsDQoJCSJFUlJPUiIgICA6IDMsDQoJCSJOT05FIiAgICA6IDQNCgl9Ow0KDQoJdmFyIGxvZ0xldmVsID0gTG9nTGV2ZWxFbnVtLkRFQlVHOw0KCXZhciBsb2cgPSB7fTsNCg0KCWxvZy5kID0gZnVuY3Rpb24obXNnKSB7DQoJCWlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uREVCVUcpIHsNCgkJCWNvbnNvbGUubG9nKCIoRC1tcmFpZC5qcykgIiArIG1zZyk7DQoJCX0NCgl9Ow0KDQoJbG9nLmkgPSBmdW5jdGlvbihtc2cpIHsNCgkJaWYgKGxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5JTkZPKSB7DQoJCQljb25zb2xlLmxvZygiKEktbXJhaWQuanMpICIgKyBtc2cpOw0KCQl9DQoJfTsNCg0KCWxvZy53ID0gZnVuY3Rpb24obXNnKSB7DQoJCWlmIChsb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTklORykgew0KCQkJY29uc29sZS5sb2coIihXLW1yYWlkLmpzKSAiICsgbXNnKTsNCgkJfQ0KCX07DQoNCglsb2cuZSA9IGZ1bmN0aW9uKG1zZykgew0KCQlpZiAobG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLkVSUk9SKSB7DQoJCQljb25zb2xlLmxvZygiKEUtbXJhaWQuanMpICIgKyBtc2cpOw0KCQl9DQoJfTsNCg0KCS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCgkgKiBNUkFJRCBkZWNsYXJhdGlvbg0KCSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KCXZhciBtcmFpZCA9IHdpbmRvdy5tcmFpZCA9IHt9Ow0KDQoJLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KCSAqIGNvbnN0YW50cw0KCSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KCXZhciBWRVJTSU9OID0gIjIuMCI7DQoNCgl2YXIgU1RBVEVTID0gbXJhaWQuU1RBVEVTID0gew0KCQkiTE9BRElORyIgOiAibG9hZGluZyIsDQoJCSJERUZBVUxUIiA6ICJkZWZhdWx0IiwNCgkJIkVYUEFOREVEIiA6ICJleHBhbmRlZCIsDQoJCSJSRVNJWkVEIiA6ICJyZXNpemVkIiwNCgkJIkhJRERFTiIgOiAiaGlkZGVuIg0KCX07DQoNCgl2YXIgUExBQ0VNRU5UX1RZUEVTID0gbXJhaWQuUExBQ0VNRU5UX1RZUEVTID0gew0KCQkiSU5MSU5FIiA6ICJpbmxpbmUiLA0KCQkiSU5URVJTVElUSUFMIiA6ICJpbnRlcnN0aXRpYWwiDQoJfTsNCg0KCXZhciBSRVNJWkVfUFJPUEVSVElFU19DVVNUT01fQ0xPU0VfUE9TSVRJT04gPSBtcmFpZC5SRVNJWkVfUFJPUEVSVElFU19DVVNUT01fQ0xPU0VfUE9TSVRJT04gPSB7DQoJCSJUT1BfTEVGVCIgOiAidG9wLWxlZnQiLA0KCQkiVE9QX0NFTlRFUiIgOiAidG9wLWNlbnRlciIsDQoJCSJUT1BfUklHSFQiIDogInRvcC1yaWdodCIsDQoJCSJDRU5URVIiIDogImNlbnRlciIsDQoJCSJCT1RUT01fTEVGVCIgOiAiYm90dG9tLWxlZnQiLA0KCQkiQk9UVE9NX0NFTlRFUiIgOiAiYm90dG9tLWNlbnRlciIsDQoJCSJCT1RUT01fUklHSFQiIDogImJvdHRvbS1yaWdodCINCgl9Ow0KDQoJdmFyIE9SSUVOVEFUSU9OX1BST1BFUlRJRVNfRk9SQ0VfT1JJRU5UQVRJT04gPSBtcmFpZC5PUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OID0gew0KCQkiUE9SVFJBSVQiIDogInBvcnRyYWl0IiwNCgkJIkxBTkRTQ0FQRSIgOiAibGFuZHNjYXBlIiwNCgkJIk5PTkUiIDogIm5vbmUiDQoJfTsNCg0KCXZhciBFVkVOVFMgPSBtcmFpZC5FVkVOVFMgPSB7DQoJCSJFUlJPUiIgOiAiZXJyb3IiLA0KCQkiUkVBRFkiIDogInJlYWR5IiwNCgkJIlNJWkVDSEFOR0UiIDogInNpemVDaGFuZ2UiLA0KCQkiU1RBVEVDSEFOR0UiIDogInN0YXRlQ2hhbmdlIiwNCgkJIlZJRVdBQkxFQ0hBTkdFIiA6ICJ2aWV3YWJsZUNoYW5nZSINCgl9Ow0KDQoJdmFyIFNVUFBPUlRFRF9GRUFUVVJFUyA9IG1yYWlkLlNVUFBPUlRFRF9GRUFUVVJFUyA9IHsNCgkJIlNNUyIgOiAic21zIiwNCgkJIlRFTCIgOiAidGVsIiwNCgkJIkNBTEVOREFSIiA6ICJjYWxlbmRhciIsDQoJCSJTVE9SRVBJQ1RVUkUiIDogInN0b3JlUGljdHVyZSIsDQoJCSJJTkxJTkVWSURFTyIgOiAiaW5saW5lVmlkZW8iDQoJfTsNCg0KCS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCgkgKiBzdGF0ZQ0KCSAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KCXZhciBzdGF0ZSA9IFNUQVRFUy5MT0FESU5HOw0KCXZhciBwbGFjZW1lbnRUeXBlID0gUExBQ0VNRU5UX1RZUEVTLklOTElORTsNCgl2YXIgc3VwcG9ydGVkRmVhdHVyZXMgPSB7fTsNCgl2YXIgaXNWaWV3YWJsZSA9IGZhbHNlOw0KCXZhciBpc0V4cGFuZFByb3BlcnRpZXNTZXQgPSBmYWxzZTsNCgl2YXIgaXNSZXNpemVSZWFkeSA9IGZhbHNlOw0KDQoJdmFyIGV4cGFuZFByb3BlcnRpZXMgPSB7DQoJCSJ3aWR0aCIgOiAwLA0KCQkiaGVpZ2h0IiA6IDAsDQoJCSJ1c2VDdXN0b21DbG9zZSIgOiBmYWxzZSwNCgkJImlzTW9kYWwiIDogdHJ1ZQ0KCX07DQoNCgl2YXIgb3JpZW50YXRpb25Qcm9wZXJ0aWVzID0gew0KCQkiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSIgOiB0cnVlLA0KCQkiZm9yY2VPcmllbnRhdGlvbiIgOiBPUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OLk5PTkUNCgl9Ow0KDQoJdmFyIHJlc2l6ZVByb3BlcnRpZXMgPSB7DQoJCSJ3aWR0aCIgOiAwLA0KCQkiaGVpZ2h0IiA6IDAsDQoJCSJjdXN0b21DbG9zZVBvc2l0aW9uIiA6IFJFU0laRV9QUk9QRVJUSUVTX0NVU1RPTV9DTE9TRV9QT1NJVElPTi5UT1BfUklHSFQsDQoJCSJvZmZzZXRYIiA6IDAsDQoJCSJvZmZzZXRZIiA6IDAsDQoJCSJhbGxvd09mZnNjcmVlbiIgOiB0cnVlDQoJfTsNCg0KCXZhciBjdXJyZW50UG9zaXRpb24gPSB7DQoJCSJ4IiA6IDAsDQoJCSJ5IiA6IDAsDQoJCSJ3aWR0aCIgOiAwLA0KCQkiaGVpZ2h0IiA6IDANCgl9Ow0KDQoJdmFyIGRlZmF1bHRQb3NpdGlvbiA9IHsNCgkJIngiIDogMCwNCgkJInkiIDogMCwNCgkJIndpZHRoIiA6IDAsDQoJCSJoZWlnaHQiIDogMA0KCX07DQoNCgl2YXIgbWF4U2l6ZSA9IHsNCgkJIndpZHRoIiA6IDAsDQoJCSJoZWlnaHQiIDogMA0KCX07DQoNCgl2YXIgc2NyZWVuU2l6ZSA9IHsNCgkJIndpZHRoIiA6IDAsDQoJCSJoZWlnaHQiIDogMA0KCX07DQoNCgl2YXIgY3VycmVudE9yaWVudGF0aW9uID0gMDsNCg0KCXZhciBsaXN0ZW5lcnMgPSB7fTsNCg0KCS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCgkgKiAib2ZmaWNpYWwiIEFQSTogbWV0aG9kcyBjYWxsZWQgYnkgY3JlYXRpdmUNCgkgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCgltcmFpZC5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsIGxpc3RlbmVyKSB7DQoJCWxvZy5pKCJtcmFpZC5hZGRFdmVudExpc3RlbmVyICIgKyBldmVudCArICI6ICIgKyBTdHJpbmcobGlzdGVuZXIpKTsNCgkJaWYgKCFldmVudCB8fCAhbGlzdGVuZXIpIHsNCgkJCW1yYWlkLmZpcmVFcnJvckV2ZW50KCJCb3RoIGV2ZW50IGFuZCBsaXN0ZW5lciBhcmUgcmVxdWlyZWQuIiwgImFkZEV2ZW50TGlzdGVuZXIiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlpZiAoIWNvbnRhaW5zKGV2ZW50LCBFVkVOVFMpKSB7DQoJCQltcmFpZC5maXJlRXJyb3JFdmVudCgiVW5rbm93biBNUkFJRCBldmVudDogIiArIGV2ZW50LCAiYWRkRXZlbnRMaXN0ZW5lciIpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCXZhciBsaXN0ZW5lcnNGb3JFdmVudCA9IGxpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnNbZXZlbnRdIHx8IFtdOw0KCQkvLyBjaGVjayB0byBtYWtlIHN1cmUgdGhhdCB0aGUgbGlzdGVuZXIgaXNuJ3QgYWxyZWFkeSByZWdpc3RlcmVkDQoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzRm9yRXZlbnQubGVuZ3RoOyBpKyspIHsNCgkJCXZhciBzdHIxID0gU3RyaW5nKGxpc3RlbmVyKTsNCgkJCXZhciBzdHIyID0gU3RyaW5nKGxpc3RlbmVyc0ZvckV2ZW50W2ldKTsNCgkJCWlmIChsaXN0ZW5lciA9PT0gbGlzdGVuZXJzRm9yRXZlbnRbaV0gfHwgc3RyMSA9PT0gc3RyMikgew0KCQkJCWxvZy5pKCJsaXN0ZW5lciAiICsgc3RyMSArICIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIGZvciBldmVudCAiICsgZXZlbnQpOw0KCQkJCXJldHVybjsNCgkJCX0NCgkJfQ0KCQlsaXN0ZW5lcnNGb3JFdmVudC5wdXNoKGxpc3RlbmVyKTsNCgl9Ow0KDQoJbXJhaWQuY3JlYXRlQ2FsZW5kYXJFdmVudCA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHsNCgkJbG9nLmkoIm1yYWlkLmNyZWF0ZUNhbGVuZGFyRXZlbnQgd2l0aCAiICsgcGFyYW1ldGVycyk7DQoJCWlmIChzdXBwb3J0ZWRGZWF0dXJlc1ttcmFpZC5TVVBQT1JURURfRkVBVFVSRVMuQ0FMRU5EQVJdKSB7DQoJCQljYWxsTmF0aXZlKCJjcmVhdGVDYWxlbmRhckV2ZW50P2V2ZW50SlNPTj0iCSsgSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycykpOw0KCQl9IGVsc2Ugew0KCQkJbG9nLmUoImNyZWF0ZUNhbGVuZGFyRXZlbnQgaXMgbm90IHN1cHBvcnRlZCIpOw0KCQl9DQoJfTsNCg0KCW1yYWlkLmNsb3NlID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5jbG9zZSIpOw0KCQlpZiAoc3RhdGUgPT09IFNUQVRFUy5MT0FESU5HDQoJCQkJfHwgKHN0YXRlID09PSBTVEFURVMuREVGQVVMVCAmJiBwbGFjZW1lbnRUeXBlID09PSBQTEFDRU1FTlRfVFlQRVMuSU5MSU5FKQ0KCQkJCXx8IHN0YXRlID09PSBTVEFURVMuSElEREVOKSB7DQoJCQkvLyBkbyBub3RoaW5nDQoJCQlyZXR1cm47DQoJCX0NCgkJY2FsbE5hdGl2ZSgiY2xvc2UiKTsNCgl9Ow0KDQoJbXJhaWQuZXhwYW5kID0gZnVuY3Rpb24odXJsKSB7DQoJCWlmICh1cmwgPT09IHVuZGVmaW5lZCkgew0KCQkJbG9nLmkoIm1yYWlkLmV4cGFuZCAoMS1wYXJ0KSIpOw0KCQl9IGVsc2Ugew0KCQkJbG9nLmkoIm1yYWlkLmV4cGFuZCAiICsgdXJsKTsNCgkJfQ0KCQkvLyBUaGUgb25seSB0aW1lIGl0IGlzIHZhbGlkIHRvIGNhbGwgZXhwYW5kIGlzIHdoZW4gdGhlIGFkIGlzDQoJCS8vIGEgYmFubmVyIGN1cnJlbnRseSBpbiBlaXRoZXIgZGVmYXVsdCBvciByZXNpemVkIHN0YXRlLg0KCQlpZiAocGxhY2VtZW50VHlwZSAhPT0gUExBQ0VNRU5UX1RZUEVTLklOTElORQ0KCQkJCXx8IChzdGF0ZSAhPT0gU1RBVEVTLkRFRkFVTFQgJiYgc3RhdGUgIT09IFNUQVRFUy5SRVNJWkVEKSkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCWlmICh1cmwgPT09IHVuZGVmaW5lZCkgew0KCQkJY2FsbE5hdGl2ZSgiZXhwYW5kIik7DQoJCX0gZWxzZSB7DQoJCQljYWxsTmF0aXZlKCJleHBhbmQ/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSk7DQoJCX0NCgl9Ow0KDQoJbXJhaWQuZ2V0Q3VycmVudFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5nZXRDdXJyZW50UG9zaXRpb24iKTsNCgkJcmV0dXJuIGN1cnJlbnRQb3NpdGlvbjsNCgl9Ow0KDQoJbXJhaWQuZ2V0RGVmYXVsdFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5nZXREZWZhdWx0UG9zaXRpb24iKTsNCgkJcmV0dXJuIGRlZmF1bHRQb3NpdGlvbjsNCgl9Ow0KDQoJbXJhaWQuZ2V0RXhwYW5kUHJvcGVydGllcyA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0RXhwYW5kUHJvcGVydGllcyIpOw0KCQlyZXR1cm4gZXhwYW5kUHJvcGVydGllczsNCgl9Ow0KDQoJbXJhaWQuZ2V0TWF4U2l6ZSA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0TWF4U2l6ZSIpOw0KCQlyZXR1cm4gbWF4U2l6ZTsNCgl9Ow0KDQoJbXJhaWQuZ2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5nZXRPcmllbnRhdGlvblByb3BlcnRpZXMiKTsNCgkJcmV0dXJuIG9yaWVudGF0aW9uUHJvcGVydGllczsNCgl9Ow0KDQoJbXJhaWQuZ2V0UGxhY2VtZW50VHlwZSA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0UGxhY2VtZW50VHlwZSIpOw0KCQlyZXR1cm4gcGxhY2VtZW50VHlwZTsNCgl9Ow0KDQoJbXJhaWQuZ2V0UmVzaXplUHJvcGVydGllcyA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0UmVzaXplUHJvcGVydGllcyIpOw0KCQlyZXR1cm4gcmVzaXplUHJvcGVydGllczsNCgl9Ow0KDQoJbXJhaWQuZ2V0U2NyZWVuU2l6ZSA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0U2NyZWVuU2l6ZSIpOw0KCQlyZXR1cm4gc2NyZWVuU2l6ZTsNCgl9Ow0KDQoJbXJhaWQuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHsNCgkJbG9nLmkoIm1yYWlkLmdldFN0YXRlIik7DQoJCXJldHVybiBzdGF0ZTsNCgl9Ow0KDQoJbXJhaWQuZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuZ2V0VmVyc2lvbiIpOw0KCQlyZXR1cm4gVkVSU0lPTjsNCgl9Ow0KDQoJbXJhaWQuaXNWaWV3YWJsZSA9IGZ1bmN0aW9uKCkgew0KCQlsb2cuaSgibXJhaWQuaXNWaWV3YWJsZSIpOw0KCQlyZXR1cm4gaXNWaWV3YWJsZTsNCgl9Ow0KDQoJbXJhaWQub3BlbiA9IGZ1bmN0aW9uKHVybCkgew0KCQlsb2cuaSgibXJhaWQub3BlbiAiICsgdXJsKTsNCgkJY2FsbE5hdGl2ZSgib3Blbj91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTsNCgl9Ow0KDQoJbXJhaWQucGxheVZpZGVvID0gZnVuY3Rpb24odXJsKSB7DQoJCWxvZy5pKCJtcmFpZC5wbGF5VmlkZW8gIiArIHVybCk7DQoJCWNhbGxOYXRpdmUoInBsYXlWaWRlbz91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTsNCgl9Ow0KDQoJbXJhaWQucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBsaXN0ZW5lcikgew0KCQlsb2cuaSgibXJhaWQucmVtb3ZlRXZlbnRMaXN0ZW5lciAiICsgZXZlbnQgKyAiIDogIiArIFN0cmluZyhsaXN0ZW5lcikpOw0KCQlpZiAoIWV2ZW50KSB7DQoJCQltcmFpZC5maXJlRXJyb3JFdmVudCgiRXZlbnQgaXMgcmVxdWlyZWQuIiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlpZiAoIWNvbnRhaW5zKGV2ZW50LCBFVkVOVFMpKSB7DQoJCQltcmFpZC5maXJlRXJyb3JFdmVudCgiVW5rbm93biBNUkFJRCBldmVudDogIiArIGV2ZW50LCAicmVtb3ZlRXZlbnRMaXN0ZW5lciIpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCWlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7DQoJCQlpZiAobGlzdGVuZXIpIHsNCgkJCQl2YXIgbGlzdGVuZXJzRm9yRXZlbnQgPSBsaXN0ZW5lcnNbZXZlbnRdOw0KCQkJCS8vIHRyeSB0byBmaW5kIHRoZSBnaXZlbiBsaXN0ZW5lcg0KCQkJCXZhciBsZW4gPSBsaXN0ZW5lcnNGb3JFdmVudC5sZW5ndGg7DQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KCQkJCQl2YXIgcmVnaXN0ZXJlZExpc3RlbmVyID0gbGlzdGVuZXJzRm9yRXZlbnRbaV07DQoJCQkJCXZhciBzdHIxID0gU3RyaW5nKGxpc3RlbmVyKTsNCgkJCQkJdmFyIHN0cjIgPSBTdHJpbmcocmVnaXN0ZXJlZExpc3RlbmVyKTsNCgkJCQkJaWYgKGxpc3RlbmVyID09PSByZWdpc3RlcmVkTGlzdGVuZXIgfHwgc3RyMSA9PT0gc3RyMikgew0KCQkJCQkJbGlzdGVuZXJzRm9yRXZlbnQuc3BsaWNlKGksIDEpOw0KCQkJCQkJYnJlYWs7DQoJCQkJCX0NCgkJCQl9DQoJCQkJaWYgKGkgPT09IGxlbikgew0KCQkJCQlsb2cuaSgibGlzdGVuZXIgIiArIHN0cjEgKyAiIG5vdCBmb3VuZCBmb3IgZXZlbnQgIiArIGV2ZW50KTsNCgkJCQl9DQoJCQkJaWYgKGxpc3RlbmVyc0ZvckV2ZW50Lmxlbmd0aCA9PT0gMCkgew0KCQkJCQlkZWxldGUgbGlzdGVuZXJzW2V2ZW50XTsNCgkJCQl9DQoJCQl9IGVsc2Ugew0KCQkJCS8vIG5vIGxpc3RlbmVyIHRvIHJlbW92ZSB3YXMgcHJvdmlkZWQsIHNvIHJlbW92ZSBhbGwgbGlzdGVuZXJzDQoJCQkJLy8gZm9yIGdpdmVuIGV2ZW50DQoJCQkJZGVsZXRlIGxpc3RlbmVyc1tldmVudF07DQoJCQl9DQoJCX0gZWxzZSB7DQoJCQlsb2cuaSgibm8gbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGV2ZW50ICIgKyBldmVudCk7DQoJCX0NCgl9Ow0KDQoJbXJhaWQucmVzaXplID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5yZXNpemUiKTsNCgkJLy8gVGhlIG9ubHkgdGltZSBpdCBpcyB2YWxpZCB0byBjYWxsIHJlc2l6ZSBpcyB3aGVuIHRoZSBhZCBpcw0KCQkvLyBhIGJhbm5lciBjdXJyZW50bHkgaW4gZWl0aGVyIGRlZmF1bHQgb3IgcmVzaXplZCBzdGF0ZS4NCgkJLy8gVHJpZ2dlciBhbiBlcnJvciBpZiB0aGUgY3VycmVudCBzdGF0ZSBpcyBleHBhbmRlZC4NCgkJaWYgKHBsYWNlbWVudFR5cGUgPT09IFBMQUNFTUVOVF9UWVBFUy5JTlRFUlNUSVRJQUwgfHwgc3RhdGUgPT09IFNUQVRFUy5MT0FESU5HIHx8IHN0YXRlID09PSBTVEFURVMuSElEREVOKSB7DQoJCQkvLyBkbyBub3RoaW5nDQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKHN0YXRlID09PSBTVEFURVMuRVhQQU5ERUQpIHsNCgkJCW1yYWlkLmZpcmVFcnJvckV2ZW50KCJtcmFpZC5yZXNpemUgY2FsbGVkIHdoZW4gYWQgaXMgaW4gZXhwYW5kZWQgc3RhdGUiLCAibXJhaWQucmVzaXplIik7DQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKCFpc1Jlc2l6ZVJlYWR5KSB7DQoJCQltcmFpZC5maXJlRXJyb3JFdmVudCgibXJhaWQucmVzaXplIGlzIG5vdCByZWFkeSB0byBiZSBjYWxsZWQiLCAibXJhaWQucmVzaXplIik7DQoJCQlyZXR1cm47DQoJCX0NCgkJY2FsbE5hdGl2ZSgicmVzaXplIik7DQoJfTsNCg0KCW1yYWlkLnNldEV4cGFuZFByb3BlcnRpZXMgPSBmdW5jdGlvbihwcm9wZXJ0aWVzKSB7DQoJCWxvZy5pKCJtcmFpZC5zZXRFeHBhbmRQcm9wZXJ0aWVzIik7DQoNCgkJaWYgKCF2YWxpZGF0ZShwcm9wZXJ0aWVzLCAic2V0RXhwYW5kUHJvcGVydGllcyIpKSB7DQoJCQlsb2cuZSgiZmFpbGVkIHZhbGlkYXRpb24iKTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCXZhciBvbGRVc2VDdXN0b21DbG9zZSA9IGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2U7DQoNCgkJLy8gZXhwYW5kUHJvcGVydGllcyBjb250YWlucyAzIHJlYWQtd3JpdGUgcHJvcGVydGllczogd2lkdGgsIGhlaWdodCwgYW5kIHVzZUN1c3RvbUNsb3NlOw0KCQkvLyB0aGUgaXNNb2RhbCBwcm9wZXJ0eSBpcyByZWFkLW9ubHkNCgkJdmFyIHJ3UHJvcHMgPSBbICJ3aWR0aCIsICJoZWlnaHQiLCAidXNlQ3VzdG9tQ2xvc2UiIF07DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgcndQcm9wcy5sZW5ndGg7IGkrKykgew0KCQkJdmFyIHByb3BuYW1lID0gcndQcm9wc1tpXTsNCgkJCWlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BuYW1lKSkgew0KCQkJCWV4cGFuZFByb3BlcnRpZXNbcHJvcG5hbWVdID0gcHJvcGVydGllc1twcm9wbmFtZV07DQoJCQl9DQoJCX0NCg0KCQkvLyBJbiBNUkFJRCB2Mi4wLCBhbGwgZXhwYW5kZWQgYWRzIGJ5IGRlZmluaXRpb24gY292ZXIgdGhlIGVudGlyZSBzY3JlZW4sDQoJCS8vIHNvIHRoZSBvbmx5IHByb3BlcnR5IHRoYXQgdGhlIG5hdGl2ZSBzaWRlIGhhcyB0byBrbm93IGFib3V0IGlzIHVzZUN1c3RvbUNsb3NlLg0KCQkvLyAoVGhhdCBpcywgdGhlIHdpZHRoIGFuZCBoZWlnaHQgcHJvcGVydGllcyBhcmUgbm90IG5lZWRlZCBieSB0aGUgbmF0aXZlIGNvZGUuKQ0KCQlpZiAoZXhwYW5kUHJvcGVydGllcy51c2VDdXN0b21DbG9zZSAhPT0gb2xkVXNlQ3VzdG9tQ2xvc2UpIHsNCgkJCWNhbGxOYXRpdmUoInVzZUN1c3RvbUNsb3NlP3VzZUN1c3RvbUNsb3NlPSIJKyBleHBhbmRQcm9wZXJ0aWVzLnVzZUN1c3RvbUNsb3NlKTsNCgkJfQ0KCQkNCgkJaXNFeHBhbmRQcm9wZXJ0aWVzU2V0ID0gdHJ1ZTsNCgl9Ow0KDQoJbXJhaWQuc2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24ocHJvcGVydGllcykgew0KCQlsb2cuaSgibXJhaWQuc2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzIik7DQoNCgkJaWYgKCF2YWxpZGF0ZShwcm9wZXJ0aWVzLCAic2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzIikpIHsNCgkJCWxvZy5lKCJmYWlsZWQgdmFsaWRhdGlvbiIpOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIG5ld09yaWVudGF0aW9uUHJvcGVydGllcyA9IHt9Ow0KCQluZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZSA9IG9yaWVudGF0aW9uUHJvcGVydGllcy5hbGxvd09yaWVudGF0aW9uQ2hhbmdlLA0KCQluZXdPcmllbnRhdGlvblByb3BlcnRpZXMuZm9yY2VPcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uOw0KDQoJCS8vIG9yaWVudGF0aW9uUHJvcGVydGllcyBjb250YWlucyAyIHJlYWQtd3JpdGUgcHJvcGVydGllczoNCgkJLy8gYWxsb3dPcmllbnRhdGlvbkNoYW5nZSBhbmQgZm9yY2VPcmllbnRhdGlvbg0KCQl2YXIgcndQcm9wcyA9IFsgImFsbG93T3JpZW50YXRpb25DaGFuZ2UiLCAiZm9yY2VPcmllbnRhdGlvbiIgXTsNCgkJZm9yICh2YXIgaSA9IDA7IGkgPCByd1Byb3BzLmxlbmd0aDsgaSsrKSB7DQoJCQl2YXIgcHJvcG5hbWUgPSByd1Byb3BzW2ldOw0KCQkJaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcG5hbWUpKSB7DQoJCQkJbmV3T3JpZW50YXRpb25Qcm9wZXJ0aWVzW3Byb3BuYW1lXSA9IHByb3BlcnRpZXNbcHJvcG5hbWVdOw0KCQkJfQ0KCQl9DQoNCgkJLy8gU2V0dGluZyBhbGxvd09yaWVudGF0aW9uQ2hhbmdlIHRvIHRydWUgd2hpbGUgc2V0dGluZyBmb3JjZU9yaWVudGF0aW9uDQoJCS8vIHRvIGVpdGhlciBwb3J0cmFpdCBvciBsYW5kc2NhcGUNCgkJLy8gaXMgY29uc2lkZXJlZCBhbiBlcnJvciBjb25kaXRpb24uDQoJCWlmIChuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZQ0KCQkJCSYmIG5ld09yaWVudGF0aW9uUHJvcGVydGllcy5mb3JjZU9yaWVudGF0aW9uICE9PSBtcmFpZC5PUklFTlRBVElPTl9QUk9QRVJUSUVTX0ZPUkNFX09SSUVOVEFUSU9OLk5PTkUpIHsNCgkJCW1yYWlkLmZpcmVFcnJvckV2ZW50KA0KCQkJCQkiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSBpcyB0cnVlIGJ1dCBmb3JjZU9yaWVudGF0aW9uIGlzICINCgkJCQkJKyBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuZm9yY2VPcmllbnRhdGlvbiwNCgkJCQkJInNldE9yaWVudGF0aW9uUHJvcGVydGllcyIpOw0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UgPSBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuYWxsb3dPcmllbnRhdGlvbkNoYW5nZTsNCgkJb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb24gPSBuZXdPcmllbnRhdGlvblByb3BlcnRpZXMuZm9yY2VPcmllbnRhdGlvbjsNCg0KCQl2YXIgcGFyYW1zID0gImFsbG93T3JpZW50YXRpb25DaGFuZ2U9Ig0KCQkJCSsgb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmFsbG93T3JpZW50YXRpb25DaGFuZ2UNCgkJCQkrICImZm9yY2VPcmllbnRhdGlvbj0iICsgb3JpZW50YXRpb25Qcm9wZXJ0aWVzLmZvcmNlT3JpZW50YXRpb247DQoNCgkJY2FsbE5hdGl2ZSgic2V0T3JpZW50YXRpb25Qcm9wZXJ0aWVzPyIgKyBwYXJhbXMpOw0KCX07DQoNCgltcmFpZC5zZXRSZXNpemVQcm9wZXJ0aWVzID0gZnVuY3Rpb24ocHJvcGVydGllcykgew0KCQlsb2cuaSgibXJhaWQuc2V0UmVzaXplUHJvcGVydGllcyIpOw0KCQkNCgkJaXNSZXNpemVSZWFkeSA9IGZhbHNlOw0KDQoJCS8vIHJlc2l6ZVByb3BlcnRpZXMgY29udGFpbnMgNiByZWFkLXdyaXRlIHByb3BlcnRpZXM6DQoJCS8vIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgsIG9mZnNldFksIGN1c3RvbUNsb3NlUG9zaXRpb24sIGFsbG93T2Zmc2NyZWVuDQoNCgkJLy8gVGhlIHByb3BlcnRpZXMgb2JqZWN0IHBhc3NlZCBpbnRvIHRoaXMgZnVuY3Rpb24gbXVzdCBjb250YWluIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgsIG9mZnNldFkuDQoJCS8vIFRoZSByZW1haW5pbmcgdHdvIHByb3BlcnRpZXMgYXJlIG9wdGlvbmFsLg0KCQl2YXIgcmVxdWlyZWRQcm9wcyA9IFsgIndpZHRoIiwgImhlaWdodCIsICJvZmZzZXRYIiwgIm9mZnNldFkiIF07DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgcmVxdWlyZWRQcm9wcy5sZW5ndGg7IGkrKykgew0KCQkJdmFyIHByb3BuYW1lID0gcmVxdWlyZWRQcm9wc1tpXTsNCgkJCWlmICghcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wbmFtZSkpIHsNCgkJCQltcmFpZC5maXJlRXJyb3JFdmVudCgNCgkJCQkJCSJyZXF1aXJlZCBwcm9wZXJ0eSAiICsgcHJvcG5hbWUgKyAiIGlzIG1pc3NpbmciLA0KCQkJCQkJIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCX0NCgkJDQoJCWlmICghdmFsaWRhdGUocHJvcGVydGllcywgInNldFJlc2l6ZVByb3BlcnRpZXMiKSkgew0KCQkJbXJhaWQuZmlyZUVycm9yRXZlbnQoImZhaWxlZCB2YWxpZGF0aW9uIiwgIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQkNCiAgICAgICAgdmFyIGFkanVzdG1lbnRzID0geyAieCI6IDAsICJ5IjogMCB9Ow0KCQkNCgkJdmFyIGFsbG93T2Zmc2NyZWVuID0gcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eSgiYWxsb3dPZmZzY3JlZW4iKSA/IHByb3BlcnRpZXMuYWxsb3dPZmZzY3JlZW4gOiByZXNpemVQcm9wZXJ0aWVzLmFsbG93T2Zmc2NyZWVuOw0KICAgICAgICBpZiAoIWFsbG93T2Zmc2NyZWVuKSB7DQogICAgICAgICAgICBpZiAocHJvcGVydGllcy53aWR0aCA+IG1heFNpemUud2lkdGggfHwgcHJvcGVydGllcy5oZWlnaHQgPiBtYXhTaXplLmhlaWdodCkgew0KICAgICAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJyZXNpemUgd2lkdGggb3IgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWF4U2l6ZSB3aWR0aCBvciBoZWlnaHQiLCAibXJhaWQuc2V0UmVzaXplUHJvcGVydGllcyIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFkanVzdG1lbnRzID0gZml0UmVzaXplVmlld09uU2NyZWVuKHByb3BlcnRpZXMpOw0KICAgICAgICB9IGVsc2UgaWYgKCFpc0Nsb3NlUmVnaW9uT25TY3JlZW4ocHJvcGVydGllcykpIHsNCiAgICAgICAgICAgIG1yYWlkLmZpcmVFcnJvckV2ZW50KCJjbG9zZSBldmVudCByZWdpb24gd2lsbCBub3QgYXBwZWFyIGVudGlyZWx5IG9uc2NyZWVuIiwgIm1yYWlkLnNldFJlc2l6ZVByb3BlcnRpZXMiKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KCQkNCgkJdmFyIHJ3UHJvcHMgPSBbICJ3aWR0aCIsICJoZWlnaHQiLCAib2Zmc2V0WCIsICJvZmZzZXRZIiwgImN1c3RvbUNsb3NlUG9zaXRpb24iLCAiYWxsb3dPZmZzY3JlZW4iIF07DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgcndQcm9wcy5sZW5ndGg7IGkrKykgew0KCQkJdmFyIHByb3BuYW1lID0gcndQcm9wc1tpXTsNCgkJCWlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BuYW1lKSkgew0KCQkJCXJlc2l6ZVByb3BlcnRpZXNbcHJvcG5hbWVdID0gcHJvcGVydGllc1twcm9wbmFtZV07DQoJCQl9DQoJCX0NCgkJDQoJCXZhciBwYXJhbXMgPQ0KCQkJIndpZHRoPSIgKyByZXNpemVQcm9wZXJ0aWVzLndpZHRoICsNCgkJCSImaGVpZ2h0PSIgKyByZXNpemVQcm9wZXJ0aWVzLmhlaWdodCArDQoJICAgICAgICAiJm9mZnNldFg9IiArIChyZXNpemVQcm9wZXJ0aWVzLm9mZnNldFggKyBhZGp1c3RtZW50cy54KSArDQoJICAgICAgICAiJm9mZnNldFk9IiArIChyZXNpemVQcm9wZXJ0aWVzLm9mZnNldFkgKyBhZGp1c3RtZW50cy55KSArDQoJCQkiJmN1c3RvbUNsb3NlUG9zaXRpb249IiArIHJlc2l6ZVByb3BlcnRpZXMuY3VzdG9tQ2xvc2VQb3NpdGlvbiArDQoJCQkiJmFsbG93T2Zmc2NyZWVuPSIgKyByZXNpemVQcm9wZXJ0aWVzLmFsbG93T2Zmc2NyZWVuOw0KDQoJCWNhbGxOYXRpdmUoInNldFJlc2l6ZVByb3BlcnRpZXM/IiArIHBhcmFtcyk7DQoNCgkJaXNSZXNpemVSZWFkeSA9IHRydWU7DQoJfTsNCg0KCW1yYWlkLnN0b3JlUGljdHVyZSA9IGZ1bmN0aW9uKHVybCkgew0KCQlsb2cuaSgibXJhaWQuc3RvcmVQaWN0dXJlICIgKyB1cmwpOw0KCQlpZiAoc3VwcG9ydGVkRmVhdHVyZXNbbXJhaWQuU1VQUE9SVEVEX0ZFQVRVUkVTLlNUT1JFUElDVFVSRV0pIHsNCgkJCWNhbGxOYXRpdmUoInN0b3JlUGljdHVyZT91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTsNCgkJfSBlbHNlIHsNCgkJCWxvZy5lKCJzdG9yZVBpY3R1cmUgaXMgbm90IHN1cHBvcnRlZCIpOw0KCQl9DQoJfTsNCg0KCW1yYWlkLnN1cHBvcnRzID0gZnVuY3Rpb24oZmVhdHVyZSkgew0KCQlsb2cuaSgibXJhaWQuc3VwcG9ydHMgIiArIGZlYXR1cmUgKyAiICIgKyBzdXBwb3J0ZWRGZWF0dXJlc1tmZWF0dXJlXSk7DQoJCXZhciByZXR2YWwgPSBzdXBwb3J0ZWRGZWF0dXJlc1tmZWF0dXJlXTsNCgkJaWYgKHR5cGVvZiByZXR2YWwgPT09ICJ1bmRlZmluZWQiKSB7DQoJCQlyZXR2YWwgPSBmYWxzZTsNCgkJfQ0KCQlyZXR1cm4gcmV0dmFsOw0KCX07DQoNCgltcmFpZC51c2VDdXN0b21DbG9zZSA9IGZ1bmN0aW9uKGlzQ3VzdG9tQ2xvc2UpIHsNCgkJbG9nLmkoIm1yYWlkLnVzZUN1c3RvbUNsb3NlICIgKyBpc0N1c3RvbUNsb3NlKTsNCgkJaWYgKGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2UgIT09IGlzQ3VzdG9tQ2xvc2UpIHsNCgkJCWV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2UgPSBpc0N1c3RvbUNsb3NlOw0KCQkJY2FsbE5hdGl2ZSgidXNlQ3VzdG9tQ2xvc2U/dXNlQ3VzdG9tQ2xvc2U9Ig0KCQkJCQkrIGV4cGFuZFByb3BlcnRpZXMudXNlQ3VzdG9tQ2xvc2UpOw0KCQl9DQoJfTsNCg0KCS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCgkgKiBoZWxwZXIgbWV0aG9kcyBjYWxsZWQgYnkgU0RLDQoJICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQoJLy8gc2V0dGVycyB0byBjaGFuZ2Ugc3RhdGUNCgltcmFpZC5zZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7DQoJCWxvZy5pKCJtcmFpZC5zZXRDdXJyZW50UG9zaXRpb24gIiArIHggKyAiLCIgKyB5ICsgIiwiICsgd2lkdGggKyAiLCIJKyBoZWlnaHQpOw0KDQoJCXZhciBwcmV2aW91c1NpemUgPSB7fTsNCgkJcHJldmlvdXNTaXplLndpZHRoID0gY3VycmVudFBvc2l0aW9uLndpZHRoOw0KCQlwcmV2aW91c1NpemUuaGVpZ2h0ID0gY3VycmVudFBvc2l0aW9uLmhlaWdodDsNCgkJbG9nLmkoInByZXZpb3VzU2l6ZSAiICsgcHJldmlvdXNTaXplLndpZHRoICsgIiwiICsgcHJldmlvdXNTaXplLmhlaWdodCk7DQoNCgkJY3VycmVudFBvc2l0aW9uLnggPSB4Ow0KCQljdXJyZW50UG9zaXRpb24ueSA9IHk7DQoJCWN1cnJlbnRQb3NpdGlvbi53aWR0aCA9IHdpZHRoOw0KCQljdXJyZW50UG9zaXRpb24uaGVpZ2h0ID0gaGVpZ2h0Ow0KDQoJCWlmICh3aWR0aCAhPT0gcHJldmlvdXNTaXplLndpZHRoIHx8IGhlaWdodCAhPT0gcHJldmlvdXNTaXplLmhlaWdodCkgew0KCQkJbXJhaWQuZmlyZVNpemVDaGFuZ2VFdmVudCh3aWR0aCwgaGVpZ2h0KTsNCgkJfQ0KCX07DQoNCgltcmFpZC5zZXREZWZhdWx0UG9zaXRpb24gPSBmdW5jdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7DQoJCWxvZy5pKCJtcmFpZC5zZXREZWZhdWx0UG9zaXRpb24gIiArIHggKyAiLCIgKyB5ICsgIiwiICsgd2lkdGggKyAiLCIJKyBoZWlnaHQpOw0KCQlkZWZhdWx0UG9zaXRpb24ueCA9IHg7DQoJCWRlZmF1bHRQb3NpdGlvbi55ID0geTsNCgkJZGVmYXVsdFBvc2l0aW9uLndpZHRoID0gd2lkdGg7DQoJCWRlZmF1bHRQb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7DQoJfTsNCg0KCW1yYWlkLnNldEV4cGFuZFNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7DQoJCWxvZy5pKCJtcmFpZC5zZXRFeHBhbmRTaXplICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7DQoJCWV4cGFuZFByb3BlcnRpZXMud2lkdGggPSB3aWR0aDsNCgkJZXhwYW5kUHJvcGVydGllcy5oZWlnaHQgPSBoZWlnaHQ7DQoJfTsNCg0KCW1yYWlkLnNldE1heFNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7DQoJCWxvZy5pKCJtcmFpZC5zZXRNYXhTaXplICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7DQoJCW1heFNpemUud2lkdGggPSB3aWR0aDsNCgkJbWF4U2l6ZS5oZWlnaHQgPSBoZWlnaHQ7DQoJfTsNCg0KCW1yYWlkLnNldFBsYWNlbWVudFR5cGUgPSBmdW5jdGlvbihwdCkgew0KCQlsb2cuaSgibXJhaWQuc2V0UGxhY2VtZW50VHlwZSAiICsgcHQpOw0KCQlwbGFjZW1lbnRUeXBlID0gcHQ7DQoJfTsNCg0KCW1yYWlkLnNldFNjcmVlblNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7DQoJCWxvZy5pKCJtcmFpZC5zZXRTY3JlZW5TaXplICIgKyB3aWR0aCArICJ4IiArIGhlaWdodCk7DQoJCXNjcmVlblNpemUud2lkdGggPSB3aWR0aDsNCgkJc2NyZWVuU2l6ZS5oZWlnaHQgPSBoZWlnaHQ7DQoJCWlmICghaXNFeHBhbmRQcm9wZXJ0aWVzU2V0KSB7DQoJCQlleHBhbmRQcm9wZXJ0aWVzLndpZHRoID0gd2lkdGg7DQoJCQlleHBhbmRQcm9wZXJ0aWVzLmhlaWdodCA9IGhlaWdodDs7DQoJCX0NCgl9Ow0KDQoJbXJhaWQuc2V0U3VwcG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlLCBzdXBwb3J0ZWQpIHsNCgkJbG9nLmkoIm1yYWlkLnNldFN1cHBvcnRzICIgKyBmZWF0dXJlICsgIiAiICsgc3VwcG9ydGVkKTsNCgkJc3VwcG9ydGVkRmVhdHVyZXNbZmVhdHVyZV0gPSBzdXBwb3J0ZWQ7DQoJfTsNCg0KCS8vIG1ldGhvZHMgdG8gZmlyZSBldmVudHMNCg0KCW1yYWlkLmZpcmVFcnJvckV2ZW50ID0gZnVuY3Rpb24obWVzc2FnZSwgYWN0aW9uKSB7DQoJCWxvZy5pKCJtcmFpZC5maXJlRXJyb3JFdmVudCAiICsgbWVzc2FnZSArICIgIiArIGFjdGlvbik7DQoJCWZpcmVFdmVudChtcmFpZC5FVkVOVFMuRVJST1IsIG1lc3NhZ2UsIGFjdGlvbik7DQoJfTsNCg0KCW1yYWlkLmZpcmVSZWFkeUV2ZW50ID0gZnVuY3Rpb24oKSB7DQoJCWxvZy5pKCJtcmFpZC5maXJlUmVhZHlFdmVudCIpOw0KCQlmaXJlRXZlbnQobXJhaWQuRVZFTlRTLlJFQURZKTsNCgl9Ow0KDQoJbXJhaWQuZmlyZVNpemVDaGFuZ2VFdmVudCA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHsNCgkJbG9nLmkoIm1yYWlkLmZpcmVTaXplQ2hhbmdlRXZlbnQgIiArIHdpZHRoICsgIngiICsgaGVpZ2h0KTsNCgkJaWYgKHN0YXRlICE9PSBtcmFpZC5TVEFURVMuTE9BRElORykgew0KCQkJZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5TSVpFQ0hBTkdFLCB3aWR0aCwgaGVpZ2h0KTsNCgkJfQ0KCX07DQoNCgltcmFpZC5maXJlU3RhdGVDaGFuZ2VFdmVudCA9IGZ1bmN0aW9uKG5ld1N0YXRlKSB7DQoJCWxvZy5pKCJtcmFpZC5maXJlU3RhdGVDaGFuZ2VFdmVudCAiICsgbmV3U3RhdGUpOw0KCQlpZiAoc3RhdGUgIT09IG5ld1N0YXRlKSB7DQoJCQlzdGF0ZSA9IG5ld1N0YXRlOw0KCQkJZmlyZUV2ZW50KG1yYWlkLkVWRU5UUy5TVEFURUNIQU5HRSwgc3RhdGUpOw0KCQl9DQoJfTsNCg0KCW1yYWlkLmZpcmVWaWV3YWJsZUNoYW5nZUV2ZW50ID0gZnVuY3Rpb24obmV3SXNWaWV3YWJsZSkgew0KCQlsb2cuaSgibXJhaWQuZmlyZVZpZXdhYmxlQ2hhbmdlRXZlbnQgIiArIG5ld0lzVmlld2FibGUpOw0KCQlpZiAoaXNWaWV3YWJsZSAhPT0gbmV3SXNWaWV3YWJsZSkgew0KCQkJaXNWaWV3YWJsZSA9IG5ld0lzVmlld2FibGU7DQoJCQlmaXJlRXZlbnQobXJhaWQuRVZFTlRTLlZJRVdBQkxFQ0hBTkdFLCBpc1ZpZXdhYmxlKTsNCgkJfQ0KCX07DQoNCgkvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoJICogaW50ZXJuYWwgaGVscGVyIG1ldGhvZHMNCgkgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCglmdW5jdGlvbiBjYWxsTmF0aXZlKGNvbW1hbmQpIHsNCgkJdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIklGUkFNRSIpOw0KCQlpZnJhbWUuc2V0QXR0cmlidXRlKCJzcmMiLCAibXJhaWQ6Ly8iICsgY29tbWFuZCk7DQoJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChpZnJhbWUpOw0KCQlpZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpZnJhbWUpOw0KCQlpZnJhbWUgPSBudWxsOw0KCX07DQoNCglmdW5jdGlvbiBmaXJlRXZlbnQoZXZlbnQpIHsNCgkJdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOw0KCQlhcmdzLnNoaWZ0KCk7DQoJCWxvZy5pKCJmaXJlRXZlbnQgIiArIGV2ZW50ICsgIiBbIiArIGFyZ3MudG9TdHJpbmcoKSArICJdIik7DQoJCXZhciBldmVudExpc3RlbmVycyA9IGxpc3RlbmVyc1tldmVudF07DQoJCWlmIChldmVudExpc3RlbmVycykgew0KCQkJdmFyIGxlbiA9IGV2ZW50TGlzdGVuZXJzLmxlbmd0aDsNCgkJCWxvZy5pKGxlbiArICIgbGlzdGVuZXIocykgZm91bmQiKTsNCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCgkJCQlldmVudExpc3RlbmVyc1tpXS5hcHBseShudWxsLCBhcmdzKTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCWxvZy5pKCJubyBsaXN0ZW5lcnMgZm91bmQiKTsNCgkJfQ0KCX07DQoNCglmdW5jdGlvbiBjb250YWlucyh2YWx1ZSwgYXJyYXkpIHsNCgkJZm9yICggdmFyIGkgaW4gYXJyYXkpIHsNCgkJCWlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCg0KCS8vIFRoZSBhY3Rpb24gcGFyYW1ldGVyIGlzIGEgc3RyaW5nIHdoaWNoIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXR0ZXIgZnVuY3Rpb24NCgkvLyB3aGljaCBjYWxsZWQgdGhpcyBmdW5jdGlvbg0KCS8vIChpbiBvdGhlciB3b3Jkcywgc2V0RXhwYW5kUHJvcGV0aWVzLCBzZXRPcmllbnRhdGlvblByb3BlcnRpZXMsIG9yDQoJLy8gc2V0UmVzaXplUHJvcGVydGllcykuDQoJLy8gSXQgc2VydmVzIGJvdGggYXMgdGhlIGtleSB0byBnZXQgdGhlIHRoZSBhcHByb3ByaWF0ZSBzZXQgb2YgdmFsaWRhdGluZw0KCS8vIGZ1bmN0aW9ucyBmcm9tIHRoZSBhbGxWYWxpZGF0b3JzIG9iamVjdA0KCS8vIGFzIHdlbGwgYXMgdGhlIGFjdGlvbiBwYXJhbWV0ZXIgb2YgYW55IGVycm9yIGV2ZW50IHRoYXQgbWF5IGJlIHRocm93bi4NCglmdW5jdGlvbiB2YWxpZGF0ZShwcm9wZXJ0aWVzLCBhY3Rpb24pIHsNCgkJdmFyIHJldHZhbCA9IHRydWU7DQoJCXZhciB2YWxpZGF0b3JzID0gYWxsVmFsaWRhdG9yc1thY3Rpb25dOw0KCQlmb3IgKHZhciBwcm9wIGluIHByb3BlcnRpZXMpIHsNCgkJCXZhciB2YWxpZGF0b3IgPSB2YWxpZGF0b3JzW3Byb3BdOw0KCQkJdmFyIHZhbHVlID0gcHJvcGVydGllc1twcm9wXTsNCgkJCWlmICh2YWxpZGF0b3IgJiYgIXZhbGlkYXRvcih2YWx1ZSkpIHsNCgkJCQltcmFpZC5maXJlRXJyb3JFdmVudCgiVmFsdWUgb2YgcHJvcGVydHkgIiArIHByb3AgKyAiICgiICsgdmFsdWUJKyAiKSBpcyBpbnZhbGlkIiwgIm1yYWlkLiIgKyBhY3Rpb24pOw0KCQkJCXJldHZhbCA9IGZhbHNlOw0KCQkJfQ0KCQl9DQoJCXJldHVybiByZXR2YWw7DQoJfTsNCg0KCXZhciBhbGxWYWxpZGF0b3JzID0gew0KCQkic2V0RXhwYW5kUHJvcGVydGllcyIgOiB7DQoJCQkvLyBJbiBNUkFJRCAyLjAsIHRoZSBvbmx5IHByb3BlcnR5IGluIGV4cGFuZFByb3BlcnRpZXMgd2UgYWN0dWFsbHkgY2FyZSBhYm91dCBpcyB1c2VDdXN0b21DbG9zZS4NCgkJCS8vIFN0aWxsLCB3ZSdsbCBkbyBhIGJhc2ljIHNhbml0eSBjaGVjayBvbiB0aGUgd2lkdGggYW5kIGhlaWdodCBwcm9wZXJ0aWVzLCB0b28uDQoJCQkid2lkdGgiIDogZnVuY3Rpb24od2lkdGgpIHsNCgkJCQlyZXR1cm4gIWlzTmFOKHdpZHRoKTsNCgkJCX0sDQoJCQkiaGVpZ2h0IiA6IGZ1bmN0aW9uKGhlaWdodCkgew0KCQkJCXJldHVybiAhaXNOYU4oaGVpZ2h0KTsNCgkJCX0sDQoJCQkidXNlQ3VzdG9tQ2xvc2UiIDogZnVuY3Rpb24odXNlQ3VzdG9tQ2xvc2UpIHsNCgkJCQlyZXR1cm4gKHR5cGVvZiB1c2VDdXN0b21DbG9zZSA9PT0gImJvb2xlYW4iKTsNCgkJCX0NCgkJfSwNCgkJInNldE9yaWVudGF0aW9uUHJvcGVydGllcyIgOiB7DQoJCQkiYWxsb3dPcmllbnRhdGlvbkNoYW5nZSIgOiBmdW5jdGlvbihhbGxvd09yaWVudGF0aW9uQ2hhbmdlKSB7DQoJCQkJcmV0dXJuICh0eXBlb2YgYWxsb3dPcmllbnRhdGlvbkNoYW5nZSA9PT0gImJvb2xlYW4iKTsNCgkJCX0sDQoJCQkiZm9yY2VPcmllbnRhdGlvbiIgOiBmdW5jdGlvbihmb3JjZU9yaWVudGF0aW9uKSB7DQoJCQkJdmFyIHZhbGlkVmFsdWVzID0gWyAicG9ydHJhaXQiLCAibGFuZHNjYXBlIiwgIm5vbmUiIF07DQoJCQkJcmV0dXJuICh0eXBlb2YgZm9yY2VPcmllbnRhdGlvbiA9PT0gInN0cmluZyIgJiYgdmFsaWRWYWx1ZXMuaW5kZXhPZihmb3JjZU9yaWVudGF0aW9uKSAhPT0gLTEpOw0KCQkJfQ0KCQl9LA0KCQkic2V0UmVzaXplUHJvcGVydGllcyIgOiB7DQoJCQkid2lkdGgiIDogZnVuY3Rpb24od2lkdGgpIHsNCgkJCQlyZXR1cm4gIWlzTmFOKHdpZHRoKSAmJiA1MCA8PSB3aWR0aDsNCgkJCX0sDQoJCQkiaGVpZ2h0IiA6IGZ1bmN0aW9uKGhlaWdodCkgew0KCQkJCXJldHVybiAhaXNOYU4oaGVpZ2h0KSAmJiA1MCA8PSBoZWlnaHQ7DQoJCQl9LA0KCQkJIm9mZnNldFgiIDogZnVuY3Rpb24ob2Zmc2V0WCkgew0KCQkJCXJldHVybiAhaXNOYU4ob2Zmc2V0WCk7DQoJCQl9LA0KCQkJIm9mZnNldFkiIDogZnVuY3Rpb24ob2Zmc2V0WSkgew0KCQkJCXJldHVybiAhaXNOYU4ob2Zmc2V0WSk7DQoJCQl9LA0KCQkJImN1c3RvbUNsb3NlUG9zaXRpb24iIDogZnVuY3Rpb24oY3VzdG9tQ2xvc2VQb3NpdGlvbikgew0KCQkJCXZhciB2YWxpZFBvc2l0aW9ucyA9IFsgInRvcC1sZWZ0IiwgInRvcC1jZW50ZXIiLCAidG9wLXJpZ2h0IiwNCgkJCQkgICAgICAgICAgICAgICAgICAgICAgICJjZW50ZXIiLA0KCQkJCSAgICAgICAgICAgICAgICAgICAgICAgImJvdHRvbS1sZWZ0IiwgImJvdHRvbS1jZW50ZXIiLAkiYm90dG9tLXJpZ2h0IiBdOw0KCQkJCXJldHVybiAodHlwZW9mIGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJzdHJpbmciICYmIHZhbGlkUG9zaXRpb25zLmluZGV4T2YoY3VzdG9tQ2xvc2VQb3NpdGlvbikgIT09IC0xKTsNCgkJCX0sDQoJCQkiYWxsb3dPZmZzY3JlZW4iIDogZnVuY3Rpb24oYWxsb3dPZmZzY3JlZW4pIHsNCgkJCQlyZXR1cm4gKHR5cGVvZiBhbGxvd09mZnNjcmVlbiA9PT0gImJvb2xlYW4iKTsNCgkJCX0NCgkJfQ0KCX07DQoJDQogICAgZnVuY3Rpb24gaXNDbG9zZVJlZ2lvbk9uU2NyZWVuKHByb3BlcnRpZXMpIHsNCiAgICAgICAgbG9nLmQoImlzQ2xvc2VSZWdpb25PblNjcmVlbiIpOw0KICAgICAgICBsb2cuZCgiZGVmYXVsdFBvc2l0aW9uICIgKyBkZWZhdWx0UG9zaXRpb24ueCArICIgIiArIGRlZmF1bHRQb3NpdGlvbi55KTsNCiAgICAgICAgbG9nLmQoIm9mZnNldCAiICsgcHJvcGVydGllcy5vZmZzZXRYICsgIiAiICsgcHJvcGVydGllcy5vZmZzZXRZKTsNCg0KICAgICAgICB2YXIgcmVzaXplUmVjdCA9IHt9Ow0KICAgICAgICByZXNpemVSZWN0LnggPSBkZWZhdWx0UG9zaXRpb24ueCArIHByb3BlcnRpZXMub2Zmc2V0WDsNCiAgICAgICAgcmVzaXplUmVjdC55ID0gZGVmYXVsdFBvc2l0aW9uLnkgKyBwcm9wZXJ0aWVzLm9mZnNldFk7DQogICAgICAgIHJlc2l6ZVJlY3Qud2lkdGggPSBwcm9wZXJ0aWVzLndpZHRoOw0KICAgICAgICByZXNpemVSZWN0LmhlaWdodCA9IHByb3BlcnRpZXMuaGVpZ2h0Ow0KICAgICAgICBwcmludFJlY3QoInJlc2l6ZVJlY3QiLCByZXNpemVSZWN0KTsNCg0KCQl2YXIgY3VzdG9tQ2xvc2VQb3NpdGlvbiA9IHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoImN1c3RvbUNsb3NlUG9zaXRpb24iKSA/DQoJCQkJcHJvcGVydGllcy5jdXN0b21DbG9zZVBvc2l0aW9uIDogcmVzaXplUHJvcGVydGllcy5jdXN0b21DbG9zZVBvc2l0aW9uOw0KICAgICAgICBsb2cuZCgiY3VzdG9tQ2xvc2VQb3NpdGlvbiAiICsgY3VzdG9tQ2xvc2VQb3NpdGlvbik7DQogICAgICAgIA0KICAgICAgICB2YXIgY2xvc2VSZWN0ID0geyAid2lkdGgiOiA1MCwgImhlaWdodCI6IDUwIH07DQoNCiAgICAgICAgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24uc2VhcmNoKCJsZWZ0IikgIT09IC0xKSB7DQogICAgICAgICAgICBjbG9zZVJlY3QueCA9IHJlc2l6ZVJlY3QueDsNCiAgICAgICAgfSBlbHNlIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgiY2VudGVyIikgIT09IC0xKSB7DQogICAgICAgICAgICBjbG9zZVJlY3QueCA9IHJlc2l6ZVJlY3QueCArIChyZXNpemVSZWN0LndpZHRoIC8gMikgLSAyNTsNCiAgICAgICAgfSBlbHNlIGlmIChjdXN0b21DbG9zZVBvc2l0aW9uLnNlYXJjaCgicmlnaHQiKSAhPT0gLTEpIHsNCiAgICAgICAgICAgIGNsb3NlUmVjdC54ID0gcmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCAtIDUwOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24uc2VhcmNoKCJ0b3AiKSAhPT0gLTEpIHsNCiAgICAgICAgICAgIGNsb3NlUmVjdC55ID0gcmVzaXplUmVjdC55Ow0KICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbUNsb3NlUG9zaXRpb24gPT09ICJjZW50ZXIiKSB7DQogICAgICAgICAgICBjbG9zZVJlY3QueSA9IHJlc2l6ZVJlY3QueSArIChyZXNpemVSZWN0LmhlaWdodCAvIDIpIC0gMjU7DQogICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tQ2xvc2VQb3NpdGlvbi5zZWFyY2goImJvdHRvbSIpICE9PSAtMSkgew0KICAgICAgICAgICAgY2xvc2VSZWN0LnkgPSByZXNpemVSZWN0LnkgKyByZXNpemVSZWN0LmhlaWdodCAtIDUwOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIG1heFJlY3QgPSB7ICJ4IjogMCwgInkiOiAwIH07DQogICAgICAgIG1heFJlY3Qud2lkdGggPSBtYXhTaXplLndpZHRoOw0KICAgICAgICBtYXhSZWN0LmhlaWdodCA9IG1heFNpemUuaGVpZ2h0Ow0KDQogICAgICAgIHJldHVybiBpc1JlY3RDb250YWluZWQobWF4UmVjdCwgY2xvc2VSZWN0KTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZml0UmVzaXplVmlld09uU2NyZWVuKHByb3BlcnRpZXMpIHsNCiAgICAgICAgbG9nLmQoImZpdFJlc2l6ZVZpZXdPblNjcmVlbiIpOw0KICAgICAgICBsb2cuZCgiZGVmYXVsdFBvc2l0aW9uICIgKyBkZWZhdWx0UG9zaXRpb24ueCArICIgIiArIGRlZmF1bHRQb3NpdGlvbi55KTsNCiAgICAgICAgbG9nLmQoIm9mZnNldCAiICsgcHJvcGVydGllcy5vZmZzZXRYICsgIiAiICsgcHJvcGVydGllcy5vZmZzZXRZKTsNCg0KICAgICAgICB2YXIgcmVzaXplUmVjdCA9IHt9Ow0KICAgICAgICByZXNpemVSZWN0LnggPSBkZWZhdWx0UG9zaXRpb24ueCArIHByb3BlcnRpZXMub2Zmc2V0WDsNCiAgICAgICAgcmVzaXplUmVjdC55ID0gZGVmYXVsdFBvc2l0aW9uLnkgKyBwcm9wZXJ0aWVzLm9mZnNldFk7DQogICAgICAgIHJlc2l6ZVJlY3Qud2lkdGggPSBwcm9wZXJ0aWVzLndpZHRoOw0KICAgICAgICByZXNpemVSZWN0LmhlaWdodCA9IHByb3BlcnRpZXMuaGVpZ2h0Ow0KICAgICAgICBwcmludFJlY3QoInJlc2l6ZVJlY3QiLCByZXNpemVSZWN0KTsNCg0KICAgICAgICB2YXIgbWF4UmVjdCA9IHsgIngiOiAwLCAieSI6IDAgfTsNCiAgICAgICAgbWF4UmVjdC53aWR0aCA9IG1heFNpemUud2lkdGg7DQogICAgICAgIG1heFJlY3QuaGVpZ2h0ID0gbWF4U2l6ZS5oZWlnaHQ7DQoNCiAgICAgICAgdmFyIGFkanVzdG1lbnRzID0geyAieCI6IDAsICJ5IjogMCB9Ow0KDQogICAgICAgIGlmIChpc1JlY3RDb250YWluZWQobWF4UmVjdCwgcmVzaXplUmVjdCkpIHsNCiAgICAgICAgICAgIGxvZy5kKCJubyBhZGp1c3RtZW50IG5lY2Vzc2FyeSIpOw0KICAgICAgICAgICAgcmV0dXJuIGFkanVzdG1lbnRzOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHJlc2l6ZVJlY3QueCA8IG1heFJlY3QueCkgew0KICAgICAgICAgICAgYWRqdXN0bWVudHMueCA9IG1heFJlY3QueCAtIHJlc2l6ZVJlY3QueDsNCiAgICAgICAgfSBlbHNlIGlmICgocmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCkgPiAobWF4UmVjdC54ICsgbWF4UmVjdC53aWR0aCkpIHsNCiAgICAgICAgICAgIGFkanVzdG1lbnRzLnggPSAobWF4UmVjdC54ICsgbWF4UmVjdC53aWR0aCkgLSAocmVzaXplUmVjdC54ICsgcmVzaXplUmVjdC53aWR0aCk7DQogICAgICAgIH0NCiAgICAgICAgbG9nLmQoImFkanVzdG1lbnRzLnggIiArIGFkanVzdG1lbnRzLngpOw0KDQogICAgICAgIGlmIChyZXNpemVSZWN0LnkgPCBtYXhSZWN0LnkpIHsNCiAgICAgICAgICAgIGFkanVzdG1lbnRzLnkgPSBtYXhSZWN0LnkgLSByZXNpemVSZWN0Lnk7DQogICAgICAgIH0gZWxzZSBpZiAoKHJlc2l6ZVJlY3QueSArIHJlc2l6ZVJlY3QuaGVpZ2h0KSA+IChtYXhSZWN0LnkgKyBtYXhSZWN0LmhlaWdodCkpIHsNCiAgICAgICAgICAgIGFkanVzdG1lbnRzLnkgPSAobWF4UmVjdC55ICsgbWF4UmVjdC5oZWlnaHQpIC0gKHJlc2l6ZVJlY3QueSArIHJlc2l6ZVJlY3QuaGVpZ2h0KTsNCiAgICAgICAgfQ0KICAgICAgICBsb2cuZCgiYWRqdXN0bWVudHMueSAiICsgYWRqdXN0bWVudHMueSk7DQoNCiAgICAgICAgcmVzaXplUmVjdC54ID0gZGVmYXVsdFBvc2l0aW9uLnggKyBwcm9wZXJ0aWVzLm9mZnNldFggKyBhZGp1c3RtZW50cy54Ow0KICAgICAgICByZXNpemVSZWN0LnkgPSBkZWZhdWx0UG9zaXRpb24ueSArIHByb3BlcnRpZXMub2Zmc2V0WSArIGFkanVzdG1lbnRzLnk7DQogICAgICAgIHByaW50UmVjdCgiYWRqdXN0ZWQgcmVzaXplUmVjdCIsIHJlc2l6ZVJlY3QpOw0KDQogICAgICAgIHJldHVybiBhZGp1c3RtZW50czsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gaXNSZWN0Q29udGFpbmVkKGNvbnRhaW5pbmdSZWN0LCBjb250YWluZWRSZWN0KSB7DQogICAgICAgIGxvZy5kKCJpc1JlY3RDb250YWluZWQiKTsNCiAgICAgICAgcHJpbnRSZWN0KCJjb250YWluaW5nUmVjdCIsIGNvbnRhaW5pbmdSZWN0KTsNCiAgICAgICAgcHJpbnRSZWN0KCJjb250YWluZWRSZWN0IiwgY29udGFpbmVkUmVjdCk7DQogICAgICAgIHJldHVybiAoY29udGFpbmVkUmVjdC54ID49IGNvbnRhaW5pbmdSZWN0LnggJiYNCiAgICAgICAgICAgIChjb250YWluZWRSZWN0LnggKyBjb250YWluZWRSZWN0LndpZHRoKSA8PSAoY29udGFpbmluZ1JlY3QueCArIGNvbnRhaW5pbmdSZWN0LndpZHRoKSAmJg0KICAgICAgICAgICAgY29udGFpbmVkUmVjdC55ID49IGNvbnRhaW5pbmdSZWN0LnkgJiYNCiAgICAgICAgICAgIChjb250YWluZWRSZWN0LnkgKyBjb250YWluZWRSZWN0LmhlaWdodCkgPD0gKGNvbnRhaW5pbmdSZWN0LnkgKyBjb250YWluaW5nUmVjdC5oZWlnaHQpKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gcHJpbnRSZWN0KGxhYmVsLCByZWN0KSB7DQogICAgICAgIGxvZy5kKGxhYmVsICsNCiAgICAgICAgICAgICIgWyIgKyByZWN0LnggKyAiLCIgKyByZWN0LnkgKyAiXSIgKw0KICAgICAgICAgICAgIixbIiArIChyZWN0LnggKyByZWN0LndpZHRoKSArICIsIiArIChyZWN0LnkgKyByZWN0LmhlaWdodCkgKyAiXSIgKw0KICAgICAgICAgICAgIiAoIiArIHJlY3Qud2lkdGggKyAieCIgKyByZWN0LmhlaWdodCArICIpIik7DQogICAgfQ0KCQ0KCW1yYWlkLmR1bXBMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHsNCgkJdmFyIG5FdmVudHMgPSBPYmplY3Qua2V5cyhsaXN0ZW5lcnMpLmxlbmd0aDsNCgkJbG9nLmkoImR1bXBpbmcgbGlzdGVuZXJzICgiICsgbkV2ZW50cyArICIgZXZlbnRzKSIpOw0KCQlmb3IgKCB2YXIgZXZlbnQgaW4gbGlzdGVuZXJzKSB7DQoJCQl2YXIgZXZlbnRMaXN0ZW5lcnMgPSBsaXN0ZW5lcnNbZXZlbnRdOw0KCQkJbG9nLmkoIiAgIiArIGV2ZW50ICsgIiBjb250YWlucyAiICsgZXZlbnRMaXN0ZW5lcnMubGVuZ3RoICsgIiBsaXN0ZW5lcnMiKTsNCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsNCgkJCQlsb2cuaSgiICAgICIgKyBldmVudExpc3RlbmVyc1tpXSk7DQoJCQl9DQoJCX0NCgl9Ow0KCQ0KCWNvbnNvbGUubG9nKCJNUkFJRCBvYmplY3QgbG9hZGVkIik7DQoNCn0pKCk7"

    const/4 v2, 0x0

    .line 82
    invoke-static {v1, v2}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    move-result-object v1

    .line 83
    new-instance v2, Ljava/lang/String;

    invoke-direct {v2, v1}, Ljava/lang/String;-><init>([B)V

    sput-object v2, Lcom/startapp/sdk/adsbase/mraid/c/a;->a:Ljava/lang/String;

    .line 85
    :cond_0
    monitor-exit v0

    goto :goto_0

    :catchall_0
    move-exception v1

    monitor-exit v0
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    throw v1

    .line 88
    :cond_1
    :goto_0
    sget-object v0, Lcom/startapp/sdk/adsbase/mraid/c/a;->a:Ljava/lang/String;

    return-object v0
.end method

.method public static a(Ljava/lang/String;)Ljava/lang/String;
    .locals 4

    .line 1057
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    const/4 v1, 0x0

    const/16 v2, 0xb

    if-ge v0, v2, :cond_0

    const/4 v0, 0x1

    goto :goto_0

    :cond_0
    const/4 v0, 0x0

    :goto_0
    if-nez v0, :cond_1

    return-object p0

    .line 27
    :cond_1
    new-instance v0, Ljava/lang/StringBuffer;

    invoke-direct {v0, p0}, Ljava/lang/StringBuffer;-><init>(Ljava/lang/String;)V

    const-string p0, "line.separator"

    .line 28
    invoke-static {p0}, Ljava/lang/System;->getProperty(Ljava/lang/String;)Ljava/lang/String;

    move-result-object p0

    .line 37
    invoke-static {v0}, Lcom/startapp/sdk/adsbase/mraid/c/a;->a(Ljava/lang/StringBuffer;)Ljava/util/regex/Matcher;

    move-result-object v2

    .line 38
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->find()Z

    move-result v3

    if-eqz v3, :cond_2

    .line 39
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->start()I

    move-result v3

    invoke-virtual {v2}, Ljava/util/regex/Matcher;->end()I

    move-result v2

    invoke-virtual {v0, v3, v2}, Ljava/lang/StringBuffer;->delete(II)Ljava/lang/StringBuffer;

    :cond_2
    const/4 v2, 0x2

    const-string v3, "<head[^>]*>"

    .line 44
    invoke-static {v3, v2}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    move-result-object v2

    .line 45
    invoke-virtual {v2, v0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    move-result-object v2

    .line 47
    :goto_1
    invoke-virtual {v2, v1}, Ljava/util/regex/Matcher;->find(I)Z

    move-result v1

    if-eqz v1, :cond_3

    .line 48
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, "<script>"

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-static {}, Lcom/startapp/sdk/adsbase/mraid/c/a;->a()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, "</script>"

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 49
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->end()I

    move-result v3

    invoke-virtual {v0, v3, v1}, Ljava/lang/StringBuffer;->insert(ILjava/lang/String;)Ljava/lang/StringBuffer;

    .line 50
    invoke-virtual {v2}, Ljava/util/regex/Matcher;->end()I

    move-result v1

    goto :goto_1

    .line 53
    :cond_3
    invoke-virtual {v0}, Ljava/lang/StringBuffer;->toString()Ljava/lang/String;

    move-result-object p0

    return-object p0
.end method

.method private static a(Ljava/lang/StringBuffer;)Ljava/util/regex/Matcher;
    .locals 2

    const-string v0, "<script\\s+[^>]*\\bsrc\\s*=\\s*([\\\"\\\'])mraid\\.js\\1[^>]*>\\s*</script>\\n*"

    const/4 v1, 0x2

    .line 69
    invoke-static {v0, v1}, Ljava/util/regex/Pattern;->compile(Ljava/lang/String;I)Ljava/util/regex/Pattern;

    move-result-object v0

    .line 70
    invoke-virtual {v0, p0}, Ljava/util/regex/Pattern;->matcher(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;

    move-result-object p0

    return-object p0
.end method

.method public static b(Ljava/lang/String;)Z
    .locals 1

    .line 74
    new-instance v0, Ljava/lang/StringBuffer;

    invoke-direct {v0, p0}, Ljava/lang/StringBuffer;-><init>(Ljava/lang/String;)V

    invoke-static {v0}, Lcom/startapp/sdk/adsbase/mraid/c/a;->a(Ljava/lang/StringBuffer;)Ljava/util/regex/Matcher;

    move-result-object p0

    invoke-virtual {p0}, Ljava/util/regex/Matcher;->find()Z

    move-result p0

    return p0
.end method
